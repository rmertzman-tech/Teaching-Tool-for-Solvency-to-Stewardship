<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>System Harms & Social Contract Lab</title>
<style>
  :root{
    --bg:#0b1020; --ink:#e9eef8; --muted:#a9b3c7; --card:#121a33; --line:#243052;
    --good:#16a34a; --warn:#f59e0b; --bad:#dc2626; --info:#2563eb; --chip:#1f2948;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.45 system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
  header,main,footer{max-width:980px;margin:auto;padding:16px}
  h1{font-size:1.6rem;margin:.25rem 0 .5rem}
  h2{font-size:1.25rem;margin:1rem 0 .5rem}
  h3{font-size:1.05rem;margin:.75rem 0 .5rem;color:var(--muted)}
  p{color:#d5dcef}
  .muted{color:var(--muted)}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin:12px 0;box-shadow:0 6px 24px rgba(0,0,0,.2)}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .col{flex:1 1 280px}
  label{display:block;font-weight:600;margin:.5rem 0 .25rem}
  select, input[type="text"], textarea{
    width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:#0f1730;color:var(--ink);
  }
  textarea{min-height:90px}
  .checkbox{display:flex;align-items:center;gap:10px;padding:8px;border:1px solid var(--line);border-radius:12px;background:#0f1730;margin:8px 0}
  .chip{display:inline-block;border:1px solid var(--line);background:var(--chip);padding:4px 8px;border-radius:999px;font-size:.85rem;margin:3px 6px 3px 0}
  .good{color:#d1fae5;background:#062a1a;border-color:#0b3a23}
  .warn{color:#fef3c7;background:#2a2106;border-color:#3a300b}
  .bad{color:#fee2e2;background:#2a0b0b;border-color:#3a0f0f}
  .bar{height:10px;border-radius:999px;background:#0e1a36;position:relative;overflow:hidden}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#f59e0b,#ef4444);width:50%}
  .kpi{display:flex;align-items:center;justify-content:space-between;margin:.35rem 0}
  .kpi b{font-weight:700}
  .badge{display:inline-block;padding:2px 8px;border-radius:8px;border:1px solid var(--line);background:#0e1a36;color:var(--muted);font-size:.8rem;margin-left:8px}
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#0e1a36;margin:3px 6px 0 0}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  button{border:1px solid var(--line);border-radius:10px;background:#0f1730;color:var(--ink);padding:10px 14px;cursor:pointer}
  button.primary{background:var(--info);border-color:var(--info)}
  a.btn{display:inline-block;text-decoration:none}
  .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
  .hint{font-size:.9rem;color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:720px){ .grid{grid-template-columns:1fr} }
  .small{font-size:.9rem}
  .note{font-size:.85rem;color:#c7d2fe}
</style>
</head>
<body>
<header class="card">
  <h1>System Harms &amp; Social Contract Lab</h1>
  <p class="muted small">
    This demo is <b>stateless</b>. Use Export/Import to save or submit your work. No tracking, no cookies.
  </p>
  <p class="small">
    Choose a real-world context, toggle <b>policy guardrails</b>, and watch predicted impacts on
    <b>workers</b>, <b>environment</b>, and <b>consumer cost</b>—plus a <b>capabilities</b> summary.
    Then write a short memo through three lenses: <i>Social Contract</i>, <i>Capabilities</i>, and <i>Care</i>.
  </p>
</header>

<main>
  <!-- Context -->
  <section class="card">
    <h2>1) Pick a Context</h2>
    <div class="row">
      <div class="col">
        <label for="context">Context</label>
        <select id="context"></select>
      </div>
      <div class="col">
        <label for="preset">Quick Preset</label>
        <select id="preset">
          <option value="custom">— Start from scratch —</option>
          <option value="minimal">Minimal Guardrails</option>
          <option value="robust">Robust Guardrails</option>
        </select>
      </div>
    </div>
    <p id="ctxDesc" class="hint"></p>
  </section>

  <!-- Guardrails -->
  <section class="card">
    <h2>2) Toggle Guardrails (the rules of the game)</h2>
    <div id="guardrails"></div>
    <div class="controls">
      <button id="clearAll">Clear</button>
      <button id="selectAll">Select All</button>
    </div>
  </section>

  <!-- Impacts -->
  <section class="card">
    <h2>3) Predicted Impacts</h2>
    <div class="grid">
      <div>
        <h3>Aggregate Effects</h3>
        <div class="kpi"><span>Workers (dignity, safety)</span><b id="k_workers">—</b></div>
        <div class="bar"><i id="bar_workers" style="width:50%"></i></div>
        <div class="kpi"><span>Environment (footprint, waste)</span><b id="k_env">—</b></div>
        <div class="bar"><i id="bar_env" style="width:50%"></i></div>
        <div class="kpi"><span>Consumer Cost (you pay)</span><b id="k_cost">—</b></div>
        <div class="bar"><i id="bar_cost" style="width:50%"></i></div>
        <p class="hint">Bars move left→right from <b>worse</b> to <b>better</b> for workers/environment. For cost, left = cheaper, right = pricier.</p>
      </div>
      <div>
        <h3>Capabilities Check (who gains what)</h3>
        <div id="caps"></div>
        <p class="hint">Scores aggregate across selected guardrails. + = improved, – = degraded, 0 = unchanged.</p>
      </div>
    </div>
  </section>

  <!-- Lenses -->
  <section class="card">
    <h2>4) Write Your Memo (3 lenses)</h2>
    <div class="grid">
      <div>
        <label for="memo_sc">Social Contract</label>
        <textarea id="memo_sc" placeholder="Who benefits? Who bears costs? Would this be acceptable behind a veil of ignorance?"></textarea>
      </div>
      <div>
        <label for="memo_cap">Capabilities</label>
        <textarea id="memo_cap" placeholder="Which basic capabilities are raised or risked (work dignity, health, education, voice, ecology)—for whom?"></textarea>
      </div>
    </div>
    <label for="memo_care" style="margin-top:.5rem">Care & Proximity</label>
    <textarea id="memo_care" placeholder="Who is relationally near to you (roommates, classmates, local workers)? What obligations arise from proximity/dependence?"></textarea>
    <div class="controls">
      <button id="fillTemplate">Insert Template</button>
      <span class="hint">You can edit the template after inserting it.</span>
    </div>
  </section>

  <!-- Export / Import -->
  <section class="card">
    <h2>Export / Import</h2>
    <p class="muted small">Export your artifact for grading or to import into later apps.</p>
    <textarea id="out" class="mono" rows="10" spellcheck="false"></textarea>
    <div class="controls">
      <button class="primary" id="copyBtn">Copy</button>
      <a id="dl" class="btn" download="system-harms-lab.json">Download</a>
    </div>
    <textarea id="inp" class="mono" rows="6" placeholder="Paste JSON here to load" spellcheck="false"></textarea>
    <div class="controls">
      <button id="loadBtn">Load</button>
      <button id="resetBtn">Reset</button>
    </div>
  </section>
</main>

<footer class="card">
  <h3>What this teaches (and why it’s ethical)</h3>
  <p class="small">
    You’re not chasing a “view from nowhere.” You’re practicing <b>objectivity-as-procedure</b>:
    clear guardrails, visible trade-offs, and a written justification across lenses
    (Social Contract, Capabilities, Care). This creates accountable pluralism: different standpoints
    can adopt different guardrail sets yet still coordinate on <i>functionally equivalent</i> ethical goals.
  </p>
</footer>

<script>
/* --------------------------
   DATA MODEL
-------------------------- */

const CAP_LIST = [
  "Decent Work",
  "Health & Safety",
  "Education & Skill",
  "Voice & Recognition",
  "Ecological Stability"
];

// context definitions
const CONTEXTS = {
  apparel: {
    title: "Apparel (T-shirt / hoodie)",
    desc: "Labor-intensive global supply chains with hidden overtime and weak safety oversight; low unit prices dominate.",
    baseline: { workers: -2, env: -2, cost: 0 }, // negative = worse
    guardrails: [
      { id:"living_wage", label:"Living wage requirement",
        note:"Raises pay and reduces overtime pressure; modest price impact.",
        vec:{ workers:+3, env:+1, cost:+1 },
        caps:{ "Decent Work":+3, "Health & Safety":+1, "Voice & Recognition":+1 } },
      { id:"supply_chain", label:"Supply chain disclosure",
        note:"Traceability enables real audits; curbs the worst abuses.",
        vec:{ workers:+2, env:+2, cost:+1 },
        caps:{ "Decent Work":+2, "Ecological Stability":+2 } },
      { id:"no_forced_ot", label:"No forced overtime",
        note:"Prevents coercive scheduling and wage theft via overtime games.",
        vec:{ workers:+3, env:+0, cost:+1 },
        caps:{ "Decent Work":+2, "Health & Safety":+1 } },
      { id:"union_neutrality", label:"Union neutrality",
        note:"Removes anti-union tactics; improves worker voice and bargaining.",
        vec:{ workers:+2, env:+0, cost:+1 },
        caps:{ "Voice & Recognition":+3, "Decent Work":+1 } }
    ]
  },
  electronics: {
    title: "Electronics (phone / laptop)",
    desc: "Energy-intensive materials and e-waste; repair barriers push premature replacement.",
    baseline: { workers: -1, env: -2, cost: 0 },
    guardrails: [
      { id:"right_to_repair", label:"Right to repair + parts availability",
        note:"Extends device life; reduces waste and total cost of ownership.",
        vec:{ workers:+1, env:+3, cost:-1 },
        caps:{ "Ecological Stability":+3, "Education & Skill":+1 } },
      { id:"ewaste_takeback", label:"E-waste take-back & certified recycling",
        note:"Cuts toxic leakage and informal dumping harms.",
        vec:{ workers:+1, env:+3, cost:+0 },
        caps:{ "Health & Safety":+2, "Ecological Stability":+3 } },
      { id:"no_conflict_minerals", label:"Conflict-free minerals verification",
        note:"Reduces financing of violence; improves mine safety.",
        vec:{ workers:+2, env:+1, cost:+1 },
        caps:{ "Decent Work":+1, "Health & Safety":+2 } },
      { id:"repairability_score", label:"Public repairability score",
        note:"Market pressure toward longer-lived products; empowers consumers.",
        vec:{ workers:+0, env:+2, cost:+0 },
        caps:{ "Education & Skill":+1, "Ecological Stability":+2 } }
    ]
  },
  gig: {
    title: "Gig work (ride-hailing / delivery)",
    desc: "Scheduling risk shifted to workers; pay variability; safety externalized.",
    baseline: { workers: -2, env: -1, cost: 0 },
    guardrails: [
      { id:"min_floor", label:"Minimum earnings floor (after expenses)",
        note:"Stabilizes income; curbs race-to-the-bottom pricing.",
        vec:{ workers:+3, env:+0, cost:+1 },
        caps:{ "Decent Work":+3 } },
      { id:"safety_insurance", label:"Company-funded safety & insurance",
        note:"Covers injuries; raises safety investments.",
        vec:{ workers:+2, env:+0, cost:+1 },
        caps:{ "Health & Safety":+3 } },
      { id:"voice_council", label:"Worker voice council",
        note:"Institutional channel for grievances and rule updates.",
        vec:{ workers:+2, env:+0, cost:+0 },
        caps:{ "Voice & Recognition":+3 } },
      { id:"green_routing", label:"Eco routing + fleet efficiency",
        note:"Lowers emissions; may lengthen ETAs slightly.",
        vec:{ workers:+0, env:+2, cost:+0 },
        caps:{ "Ecological Stability":+2 } }
    ]
  },
  housing: {
    title: "Housing (rental market)",
    desc: "Rent shocks destabilize students; safety enforcement uneven; supply constraints raise prices.",
    baseline: { workers: -1, env: -1, cost: 0 },
    guardrails: [
      { id:"safety_inspect", label:"Regular safety inspections",
        note:"Prevents slum conditions; reduces health hazards.",
        vec:{ workers:+2, env:+0, cost:+0 },
        caps:{ "Health & Safety":+3 } },
      { id:"rent_stabilize", label:"Rent stabilization & notice period",
        note:"Smooths rent spikes for tenants; may reduce speculative churn.",
        vec:{ workers:+2, env:+0, cost:-1 },
        caps:{ "Decent Work":+1, "Health & Safety":+1 } },
      { id:"inclusionary", label:"Inclusionary zoning (mixed income)",
        note:"Increases supply & diversity; lowers segregation.",
        vec:{ workers:+1, env:+1, cost:+0 },
        caps:{ "Education & Skill":+1, "Voice & Recognition":+1 } },
      { id:"efficiency_retrofit", label:"Efficiency retrofit incentives",
        note:"Lowers utility bills & emissions; small upfront costs.",
        vec:{ workers:+0, env:+2, cost:+0 },
        caps:{ "Ecological Stability":+2 } }
    ]
  },
  coffee: {
    title: "Food/Drink (coffee supply chain)",
    desc: "Farmgate prices volatile; deforestation pressure; certifications vary.",
    baseline: { workers: -2, env: -2, cost: 0 },
    guardrails: [
      { id:"floor_price", label:"Fair trade floor price",
        note:"Protects farmers in price crashes; small retail premium.",
        vec:{ workers:+3, env:+0, cost:+1 },
        caps:{ "Decent Work":+2 } },
      { id:"no_deforest", label:"No-deforestation verification",
        note:"Protects biodiversity and carbon sinks.",
        vec:{ workers:+0, env:+3, cost:+1 },
        caps:{ "Ecological Stability":+3 } },
      { id:"coop_support", label:"Co-op / smallholder support",
        note:"Improves bargaining & local education via co-ops.",
        vec:{ workers:+2, env:+1, cost:+1 },
        caps:{ "Voice & Recognition":+2, "Education & Skill":+1 } },
      { id:"transparent_premium", label:"Transparent premium to producers",
        note:"Shows how much reaches farmers; pressures middlemen.",
        vec:{ workers:+2, env:+0, cost:+1 },
        caps:{ "Voice & Recognition":+1, "Decent Work":+1 } }
    ]
  }
};

// state
let state = {
  contextKey: "apparel",
  selected: new Set(),
  metrics: { workers: 0, env: 0, cost: 0, caps:{} },
  memo: { sc:"", cap:"", care:"" }
};

/* --------------------------
   DOM HELPERS
-------------------------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
function pctToLabel(p, positiveBetter=true){
  // map from -5..+5 into labels
  // for cost: positiveBetter = false (left cheaper)
  const clamp = Math.max(-5, Math.min(5, p));
  if(positiveBetter){
    if(clamp <= -3) return ["Very Poor","bad",10];
    if(clamp == -2) return ["Poor","bad",20];
    if(clamp == -1) return ["Weak","warn",35];
    if(clamp == 0) return ["Neutral","",50];
    if(clamp == 1) return ["Slight +","good",62];
    if(clamp == 2) return ["Moderate +","good",75];
    if(clamp >= 3) return ["Strong +","good",90];
  }else{ // cost: negative is good (cheaper)
    if(clamp <= -3) return ["Much Cheaper","good",15];
    if(clamp == -2) return ["Cheaper","good",30];
    if(clamp == -1) return ["Slightly Cheaper","good",40];
    if(clamp == 0) return ["No Change","",50];
    if(clamp == 1) return ["Slightly Pricier","warn",60];
    if(clamp == 2) return ["Pricier","warn",70];
    if(clamp >= 3) return ["Much Pricier","bad",85];
  }
  return ["—","",50];
}

/* --------------------------
   RENDERERS
-------------------------- */

function renderContexts(){
  const sel = $("#context");
  sel.innerHTML = "";
  Object.entries(CONTEXTS).forEach(([k,v])=>{
    const o = document.createElement("option");
    o.value = k; o.textContent = v.title;
    sel.appendChild(o);
  });
  sel.value = state.contextKey;
  $("#ctxDesc").textContent = CONTEXTS[state.contextKey].desc;
}

function renderGuardrails(){
  const box = $("#guardrails");
  box.innerHTML = "";
  const ctx = CONTEXTS[state.contextKey];
  ctx.guardrails.forEach(g=>{
    const wrap = document.createElement("div");
    wrap.className = "checkbox";
    wrap.innerHTML = `
      <input type="checkbox" id="gr_${g.id}" ${state.selected.has(g.id)?"checked":""}>
      <label for="gr_${g.id}" style="margin:0;flex:1">
        ${g.label}
        <span class="badge" title="${g.note}">info</span>
      </label>
      <span class="chip">${impactChip(g.vec)}</span>
    `;
    box.appendChild(wrap);
    wrap.querySelector("input").addEventListener("change", e=>{
      if(e.target.checked) state.selected.add(g.id); else state.selected.delete(g.id);
      computeImpacts(); renderImpacts(); syncOut();
    });
  });
}

function impactChip(vec){
  const w = vec.workers||0, e = vec.env||0, c = vec.cost||0;
  const wL = w>0?"+":"";
  const eL = e>0?"+":"";
  const cL = c<0?"–": (c>0?"+":"");
  return `workers ${wL}${w} · env ${eL}${e} · cost ${cL}${c}`;
}

function renderImpacts(){
  const {workers, env, cost, caps} = state.metrics;
  // workers/env bars (positive better)
  let [wl, wc, wp] = pctToLabel(workers,true);
  $("#k_workers").textContent = wl;
  $("#k_workers").className = wc ? wc : "";
  $("#bar_workers").style.width = wp + "%";

  let [el, ec, ep] = pctToLabel(env,true);
  $("#k_env").textContent = el;
  $("#k_env").className = ec ? ec : "";
  $("#bar_env").style.width = ep + "%";

  let [cl, cc, cp] = pctToLabel(cost,false);
  $("#k_cost").textContent = cl;
  $("#k_cost").className = cc ? cc : "";
  $("#bar_cost").style.width = cp + "%";

  // capabilities list
  const cbox = $("#caps");
  cbox.innerHTML = "";
  CAP_LIST.forEach(cap=>{
    const v = (caps[cap]||0);
    const cls = v>0?"good":(v<0?"bad":"");
    const sign = v>0?"+":(v<0?"–":"±");
    const pill = document.createElement("div");
    pill.className = "pill "+cls;
    pill.textContent = `${cap}: ${sign}${Math.abs(v)}`;
    cbox.appendChild(pill);
  });
}

/* --------------------------
   LOGIC
-------------------------- */

function computeImpacts(){
  const ctx = CONTEXTS[state.contextKey];
  let w = ctx.baseline.workers||0;
  let e = ctx.baseline.env||0;
  let c = ctx.baseline.cost||0;
  const caps = {};
  ctx.guardrails.forEach(g=>{
    if(state.selected.has(g.id)){
      w += (g.vec.workers||0);
      e += (g.vec.env||0);
      c += (g.vec.cost||0);
      const m = g.caps||{};
      Object.entries(m).forEach(([k,val])=>{
        caps[k] = (caps[k]||0) + val;
      });
    }
  });
  state.metrics = { workers: clamp5(w), env: clamp5(e), cost: clamp5(c), caps };
}

function clamp5(n){ return Math.max(-5, Math.min(5, Math.round(n))); }

/* --------------------------
   MEMO TEMPLATE & EXPORT
-------------------------- */

function fillTemplate(){
  const ctx = CONTEXTS[state.contextKey].title;
  const gs = CONTEXTS[state.contextKey].guardrails.filter(g=>state.selected.has(g.id)).map(g=>g.label);
  const [wL] = pctToLabel(state.metrics.workers,true);
  const [eL] = pctToLabel(state.metrics.env,true);
  const [cL] = pctToLabel(state.metrics.cost,false);
  const tops = Object.entries(state.metrics.caps).sort((a,b)=>b[1]-a[1]).slice(0,2).map(x=>x[0]);
  $("#memo_sc").value = `Context: ${ctx}.
Guardrails I’m proposing: ${gs.join(", ")||"(none)"}.
Social contract: Under these rules, benefits go to [who?] and costs to [who?]. Would I accept these terms not knowing my position? I argue yes/no because…`;
  $("#memo_cap").value = `Capabilities most improved: ${tops.join(", ")||"(none)"}.
Risks that remain: [name them].
Why this matters for basic functionings (work dignity, safety, education, voice, ecology): …`;
  $("#memo_care").value = `Care & proximity: People near me affected (roommates/classmates/local workers) are… so I owe… Practical action: I will [buy/avoid/support/inform] accordingly this month.`;
}

function exportState(){
  const ctx = CONTEXTS[state.contextKey];
  const out = {
    app: "system-harms-lab",
    version: 1,
    context: { key: state.contextKey, title: ctx.title },
    selected_guardrails: Array.from(state.selected),
    metrics: state.metrics,
    memo: {
      social_contract: $("#memo_sc").value.trim(),
      capabilities: $("#memo_cap").value.trim(),
      care: $("#memo_care").value.trim()
    },
    timestamp: new Date().toISOString()
  };
  $("#out").value = JSON.stringify(out, null, 2);
  $("#dl").href = "data:application/json;charset=utf-8," + encodeURIComponent($("#out").value);
}

function importState(){
  try{
    const obj = JSON.parse($("#inp").value);
    if(obj.app !== "system-harms-lab") throw new Error("Not a System Harms Lab file.");
    state.contextKey = obj.context?.key || state.contextKey;
    state.selected = new Set(obj.selected_guardrails || []);
    $("#memo_sc").value = obj.memo?.social_contract || "";
    $("#memo_cap").value = obj.memo?.capabilities || "";
    $("#memo_care").value = obj.memo?.care || "";
    renderContexts(); renderGuardrails(); computeImpacts(); renderImpacts(); exportState();
    alert("Loaded.");
  }catch(e){
    alert("Invalid JSON: " + e.message);
  }
}

function resetAll(){
  state.selected = new Set();
  $("#memo_sc").value = $("#memo_cap").value = $("#memo_care").value = "";
  renderContexts(); renderGuardrails(); computeImpacts(); renderImpacts(); exportState();
}

function syncOut(){ exportState(); }

/* --------------------------
   PRESETS & WIRING
-------------------------- */

function applyPreset(val){
  const ctx = CONTEXTS[state.contextKey];
  const all = ctx.guardrails.map(g=>g.id);
  state.selected = new Set();
  if(val==="minimal"){
    // choose one or two low-cost/high-impact defaults
    if(state.contextKey==="electronics") state.selected.add("ewaste_takeback");
    if(state.contextKey==="apparel") state.selected.add("supply_chain");
    if(state.contextKey==="gig") state.selected.add("safety_insurance");
    if(state.contextKey==="housing") state.selected.add("safety_inspect");
    if(state.contextKey==="coffee") state.selected.add("transparent_premium");
  }else if(val==="robust"){
    all.forEach(id=>state.selected.add(id));
  }
  renderGuardrails(); computeImpacts(); renderImpacts(); exportState();
}

function wire(){
  renderContexts();
  renderGuardrails();
  computeImpacts();
  renderImpacts();
  exportState();

  $("#context").addEventListener("change", e=>{
    state.contextKey = e.target.value;
    $("#ctxDesc").textContent = CONTEXTS[state.contextKey].desc;
    state.selected = new Set();
    $("#preset").value="custom";
    renderGuardrails(); computeImpacts(); renderImpacts(); syncOut();
  });

  $("#preset").addEventListener("change", e=> applyPreset(e.target.value));

  $("#clearAll").addEventListener("click", ()=>{ state.selected=new Set(); renderGuardrails(); computeImpacts(); renderImpacts(); syncOut(); });
  $("#selectAll").addEventListener("click", ()=>{
    const ctx = CONTEXTS[state.contextKey];
    state.selected=new Set(ctx.guardrails.map(g=>g.id));
    renderGuardrails(); computeImpacts(); renderImpacts(); syncOut();
  });

  $("#fillTemplate").addEventListener("click", fillTemplate);
  $("#copyBtn").addEventListener("click", ()=> navigator.clipboard.writeText($("#out").value));
  $("#loadBtn").addEventListener("click", importState);
  $("#resetBtn").addEventListener("click", resetAll);

  ["memo_sc","memo_cap","memo_care"].forEach(id=> $("#"+id).addEventListener("input", syncOut));
}

wire();
</script>
</body>
</html>
